import numpy as np
import matplotlib.pyplot as plt

# ------------------------------------------------------------------
# 1) Define noise levels on x-axis (replace with your actual values)
# ------------------------------------------------------------------
# Example: same 6 corruption probabilities as in the main paper
noise_levels = np.array([0.1, 0.25, 0.5, 0.75, 0.9, 0.99])

# ------------------------------------------------------------------
# 2) Data for sensor failure (type = 4)
#    Format: one dict per (sticky, env) configuration
# ------------------------------------------------------------------

# data_sticky3_env2 = {
#     "LinearComb": [-0.78, -0.99, -2.12, -2.16, -1.86, -1.42],
#     "ConCat":     [-0.70, -1.24, -1.42, -0.98, -1.56, -1.08],
#     "Curl":       [-2.56, -3.03, -2.68, -2.71, -2.99, -3.13],
#     "MMM":        [ 2.13,  1.97,  1.58,  0.63, -0.18, -1.51],
#     "GMC":        [-0.92, -1.14, -1.32, -1.72, -1.88, -2.12],
#     "AMDF":       [-1.10, -1.29, -1.20, -1.87, -1.52, -2.41],
#     "CORAL":      [-0.79, -0.80, -0.77, -0.79, -0.78, -0.81],
# }
#
# data_sticky10_env2 = {
#     "LinearComb": [-1.00, -0.84, -1.31, -2.20, -1.75, -2.34],
#     "ConCat":     [-0.17, -0.90, -1.49, -1.27, -1.61, -1.64],
#     "Curl":       [-2.34, -3.18, -2.38, -2.55, -2.76, -2.91],
#     "MMM":        [ 2.21,  1.95,  1.67,  0.65,  0.05, -0.33],
#     "GMC":        [-0.96, -1.09, -1.10, -2.23, -1.65, -2.21],
#     "AMDF":       [-0.70, -0.91, -0.70, -1.80, -2.18, -2.12],
#     "CORAL":      [-0.79, -0.75, -0.79, -0.87, -0.79, -0.79],
# }
#
# data_sticky3_env3 = {
#     "LinearComb": [ 1.60, -0.70, -0.85, -2.03, -1.73, -2.96],
#     "ConCat":     [ 2.14,  1.03, -0.22, -0.21, -1.62, -1.65],
#     "Curl":       [ 2.69,  1.71,  0.00, -1.04, -1.31, -1.99],
#     "MMM":        [ 6.79,  6.78,  5.81,  5.59,  3.43,  3.68],
#     "GMC":        [ 0.48,  0.42, -0.33, -0.73, -0.86, -0.44],
#     "AMDF":       [ 0.96, -0.60, -1.30, -0.81, -1.32, -1.86],
#     "CORAL":      [-0.19, -0.96, -1.89, -2.01, -2.70, -3.23],
# }
#
# data_sticky10_env3 = {
#     "LinearComb": [ 1.17,  0.14, -0.33, -2.56, -2.34, -2.04],
#     "ConCat":     [ 0.65,  0.66,  0.63, -0.77, -1.21, -0.71],
#     "Curl":       [ 1.98,  1.61, -0.77, -1.47, -2.00, -2.46],
#     "MMM":        [ 7.92,  6.82,  7.03,  5.19,  3.64,  3.50],
#     "GMC":        [ 0.51, -0.39, -0.89, -0.74, -0.52, -0.87],
#     "AMDF":       [ 0.40, -0.05, -0.59, -1.05, -0.26, -1.94],
#     "CORAL":      [-0.41, -1.53, -1.99, -2.13, -2.61, -2.49],
# }

data_sticky3_env2 = {
    "LinearComb": {"mean": [-1.4, -0.69, -1.77, -1.36, -1.49, -2.03],
                   "std":  [ 2.0,  1.29,  0.94,  0.77,  0.71,  0.92],},
    "ConCat": {"mean": [ 0.06, -0.5, -1.12, -1.3, -0.77, -1.33],
               "std":  [ 0.48,  0.71,  0.35,  0.36,  0.51,  0.39],},
    "Curl": {"mean": [-3.08, -2.9, -2.68, -2.67, -2.84, -2.99],
             "std":  [ 1.39,  1.12,  0.91,  0.6,   0.59,  0.44],},
    "MMM": {"mean": [ 1.89,  2.23,  1.6,   0.59, -0.43, -1.09],
            "std":  [ 0.47,  1.02,  1.05,  0.83,  1.37,  1.58],},
    "GMC": {"mean": [-0.98, -1.14, -1.19, -1.74, -1.88, -1.65],
            "std":  [ 0.32,  0.39,  0.32,  0.74,  0.8,   0.64],},
    "AMDF": {"mean": [-1.01, -1.33, -1.12, -1.68, -2.4,  -2.19],
             "std":  [ 0.88,  0.82,  0.42,  0.89,  1.85,  0.97],},
    "CORAL": {"mean": [-0.77, -0.8,  -0.79, -0.75, -0.85, -0.81],
              "std":  [ 0.03,  0.06,  0.03,  0.08,  0.11,  0.04],},
}

data_sticky10_env2 = {
    "LinearComb": {"mean": [-0.68, -0.76, -0.86, -1.57, -1.71, -1.73],
                   "std":  [ 0.62,  0.92,  0.57,  0.96,  1.29,  0.76],},
    "ConCat": {"mean": [-1.53, -1.12, -1.45, -1.14, -1.38, -1.06],
               "std":  [ 0.21,  0.26,  0.21,  0.41,  0.29,  0.12],},
    "Curl": {"mean": [-3.05, -3.13, -2.14, -2.75, -2.84, -3.12],
             "std":  [ 1.21,  1.12,  1.02,  0.51,  0.37,  0.59],},
    "MMM": {"mean": [ 1.88,  1.66,  1.48,  0.45, -0.59, -1.04],
            "std":  [ 0.88,  0.8,   0.6,   0.55,  1.21,  1.23],},
    "GMC": {"mean": [-0.99, -1.14, -1.32, -1.57, -1.92, -1.92],
            "std":  [ 0.41,  0.43,  0.42,  0.55,  0.84,  0.8 ],},
    "AMDF": {"mean": [-0.77, -1.1,  -1.59, -1.8,  -2.47, -2.44],
             "std":  [ 1.02,  0.72,  1.05,  0.58,  1.79,  2.04],},
    "CORAL": {"mean": [-0.75, -0.82, -0.84, -0.8,  -0.85, -0.83],
              "std":  [ 0.03,  0.05,  0.07,  0.04,  0.11,  0.05],},
}

data_sticky3_env3 = {
    "LinearComb": {"mean": [ 1.72,  0.55, -0.03, -2.96, -2.5,  -1.66],
                   "std":  [ 0.67,  1.1,   0.4,   2.24,  1.69,  1.9 ],},
    "ConCat": {"mean": [ 2.18, -0.07, -0.19, -1.23, -1.16, -2.25],
               "std":  [ 1.07,  0.7,   1.1,   0.64,  0.71,  1.31],},
    "Curl": {"mean": [ 2.12,  2.13,  0.64, -1.03, -1.63, -2.69],
             "std":  [ 2.24,  2.82,  3.97,  3.07,  3.12,  4.35],},
    "MMM": {"mean": [ 7.72,  6.11,  5.38,  5.45,  3.99,  4.36],
            "std":  [ 1.08,  1.66,  0.98,  2.36,  1.79,  2.65],},
    "GMC": {"mean": [ 0.16, -0.06, -0.32, -0.78, -0.79, -0.39],
            "std":  [ 0.33,  1.13,  0.57,  0.28,  0.17,  0.66],},
    "AMDF": {"mean": [ 1.43,  1.18, -1.03, -1.18, -1.48, -1.83],
             "std":  [ 1.74,  1.3,   0.41,  1.45,  0.53,  0.67],},
    "CORAL": {"mean": [-0.34, -1.01, -1.28, -2.84, -2.61, -2.7 ],
              "std":  [ 1.86,  1.78,  1.93,  1.24,  0.79,  1.59],},
}

data_sticky10_env3 = {
    "LinearComb": {"mean": [ 1.35, -0.16, -0.87, -2.32, -1.94, -3.08],
                   "std":  [ 1.02,  1.18,  1.75,  2.25,  2.07,  1.18],},
    "ConCat": {"mean": [ 1.09,  0.99, -0.66, -1.32, -0.75, -0.88],
               "std":  [ 1.25,  0.74,  0.64,  1.12,  1.2,   0.8 ],},
    "Curl": {"mean": [ 2.73,  1.28,  0.6,  -1.88, -0.89, -2.47],
             "std":  [ 3.0,   2.85,  5.16,  3.29,  2.2,   3.27],},
    "MMM": {"mean": [ 7.43,  7.08,  5.74,  6.69,  3.24,  2.51],
            "std":  [ 0.09,  1.62,  0.33,  1.15,  1.65,  2.5 ],},
    "GMC": {"mean": [ 0.43,  0.3,  -0.15, -0.43, -0.57, -0.66],
            "std":  [ 0.89,  0.96,  0.28,  0.42,  0.43,  0.29],},
    "AMDF": {"mean": [ 0.77, -0.18, -0.32, -0.44, -0.67, -1.82],
             "std":  [ 1.3,   1.14,  1.56,  0.32,  1.19,  0.96],},
    "CORAL": {"mean": [-0.32, -1.28, -2.12, -2.26, -2.38, -3.29],
              "std":  [ 1.37,  2.03,  1.49,  1.67,  1.95,  1.62],},
}

# Pack into a dict for easy looping
configs = [
    ("K=3, FetchPickAndPlace", data_sticky3_env2),
    ("K=10, FetchPickAndPlace", data_sticky10_env2),
    ("K=3, FetchSlide", data_sticky3_env3),
    ("K=10, FetchSlide", data_sticky10_env3),
]

# ------------------------------------------------------------------
# 3) Plot: 2x2 subplots
# ------------------------------------------------------------------
# fig, axes = plt.subplots(2, 2, figsize=(10, 8), sharex=True, sharey=False)
fig, axes = plt.subplots(1, 4, figsize=(16, 4), sharex=True, sharey=False)

# for ax in axes[0, :]:
#     ax.set_ylim(-4, 3)
# for ax in axes[1, :]:
#     ax.set_ylim(-4, 9)

for ax in axes[:2]:
    ax.set_ylim(-4, 3)
for ax in axes[2:]:
    ax.set_ylim(-4, 9)

for ax, (title, data_dict) in zip(axes.flat, configs):
    for method, ys in data_dict.items():
        mean = np.array(ys["mean"])
        std  = np.array(ys["std"])
        (line,) = ax.plot(noise_levels, mean, label=method)
        color = line.get_color()
        ax.scatter(noise_levels, mean, s=10, color=color)
        ax.fill_between(noise_levels, mean - std, mean + std, alpha=0.2, color=color)
        # ax.errorbar(
        #     noise_levels,
        #     mean,
        #     yerr=std,
        #     label=method,
        #     fmt="-o",     # line + markers
        #     markersize=3,
        #     capsize=3
        # )
    ax.set_title(title)
    ax.set_xlabel("corruption probability")
    ax.set_ylabel("return")
    # ax.grid(True, linestyle="--", alpha=0.3)

plt.tight_layout(rect=[0, 0.12, 1, 1])
# handles, labels = axes[0, 0].get_legend_handles_labels()
handles, labels = axes[0].get_legend_handles_labels()
fig.legend(handles, labels,
           loc="lower center", ncol=4,
           bbox_to_anchor=(0.5, 0.02))

# plt.show()
plt.savefig('./saved_assets/sticky.pdf', )
plt.close()